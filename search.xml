<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Internet安全协议与分析Notes</title>
      <link href="2020/11/02/Internet%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AENotes/"/>
      <url>2020/11/02/Internet%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AENotes/</url>
      
        <content type="html"><![CDATA[<h2 id="IPSec">IPSec</h2><p><img src=".//image-20201101110459619.png" class="lazyload" data-srcset=".//image-20201101110459619.png" srcset="data:image/png;base64,666" alt="image-20201101110459619"></p><h3 id="通信保护协议">通信保护协议</h3><h4 id="AH">AH</h4><ul><li>通信提供数据源认证、<strong>抗抵赖性</strong>、数据完整性和反重播保证，但不提供机密性保护</li></ul><p><strong>AH传输模式</strong></p><img src=".//image-20201101111305325.png" class="lazyload" data-srcset=".//image-20201101111305325.png" srcset="data:image/png;base64,666" alt="image-20201101111305325" style="zoom:80%;" /><ul><li>源IP地址、目的IP地址是不能修改的，否则会被检测出来，因此AH在传输模式下和NAT冲突</li></ul><p><strong>AH隧道模式</strong></p><img src=".//image-20201101111704982.png" class="lazyload" data-srcset=".//image-20201101111704982.png" srcset="data:image/png;base64,666" alt="image-20201101111704982" style="zoom:80%;" /><ul><li>AH验证的范围也是整个IP包，因此AH和NAT的冲突在隧道模式下也存在</li></ul><h4 id="ESP">ESP</h4><ul><li>为IP提供<strong>机密性</strong>、数据源认证、抗重播以及数据完整性等安全服务，但不提供抗抵赖性</li><li>对IP头部不进行认证，因此不会和NAT冲突</li></ul><p><strong>ESP传输模式</strong></p><img src=".//image-20201101112035985.png" class="lazyload" data-srcset=".//image-20201101112035985.png" srcset="data:image/png;base64,666" alt="image-20201101112035985"  /><p><strong>ESP隧道模式</strong></p><img src=".//image-20201101112141274.png" class="lazyload" data-srcset=".//image-20201101112141274.png" srcset="data:image/png;base64,666" alt="image-20201101112141274" style="zoom:80%;" /><h3 id="密钥交换管理协议IKE">密钥交换管理协议IKE</h3><ul><li>安全机制<ul><li>前向安全性：一个密钥被破解不影响其他密钥的安全性</li><li>数据验证</li><li>DH交换和密钥分发</li></ul></li></ul><h4 id="阶段1">阶段1</h4><img src=".//image-20201101113424882.png" class="lazyload" data-srcset=".//image-20201101113424882.png" srcset="data:image/png;base64,666" alt="image-20201101113424882" style="zoom:80%;" /><p><strong>主模式协商</strong></p><img src=".//image-20201101113221833.png" class="lazyload" data-srcset=".//image-20201101113221833.png" srcset="data:image/png;base64,666" alt="image-20201101113221833" style="zoom:80%;" /><p><strong>野蛮模式协商</strong></p><img src=".//image-20201101113300883.png" class="lazyload" data-srcset=".//image-20201101113300883.png" srcset="data:image/png;base64,666" alt="image-20201101113300883" style="zoom:80%;" /> <p><strong>两种模式对比</strong></p><img src=".//image-20201101113329111.png" class="lazyload" data-srcset=".//image-20201101113329111.png" srcset="data:image/png;base64,666" alt="image-20201101113329111" style="zoom:80%;" /><h4 id="阶段2">阶段2</h4><img src=".//image-20201101113446458.png" class="lazyload" data-srcset=".//image-20201101113446458.png" srcset="data:image/png;base64,666" alt="image-20201101113446458" style="zoom:80%;" /><h2 id="SSL">SSL</h2><ul><li>安全机制<ul><li>数据机密性：对称加密</li><li>身份验证机制：基于证书的数字签名</li><li>消息完整性：MAC算法</li></ul></li><li>SSL连接和会话<ul><li>连接是点对点的、暂时的</li><li>会话是客户端和服务器之间持久的关联</li></ul></li></ul><h3 id="SSL分层结构">SSL分层结构</h3><ul><li>上层协议<ul><li>SSL握手协议：协商加密套件，交换密钥，身份认证</li><li>SSL password变化协议：修改新的加密套件和密钥</li><li>SSL警告协议：当其他过程中出现错误或发送异常时，向对方报告告警信息</li></ul></li><li>下层协议<ul><li>SSL记录协议：对上层数据分块、压缩、加密、传输</li></ul></li></ul><h4 id="SSL握手协议">SSL握手协议</h4><p><strong>阶段1：建立安全能力</strong></p><ul><li>协商加密套件</li></ul><p><strong>阶段2：服务器鉴别与密钥交换</strong></p><p><strong>阶段3：客户端鉴别与密钥交换</strong></p><ul><li>服务器和客户端分别发送自己的证书并交换密钥信息以便进行身份认证</li></ul><p><strong>阶段4：完成</strong></p><ul><li>检验双方是否获得同样的安全参数</li></ul><h4 id="SSL记录协议">SSL记录协议</h4><p>为每个SSL连接提供：</p><ul><li>机密性</li><li>完整性</li></ul><h3 id="SSL协议安全性分析">SSL协议安全性分析</h3><ul><li>鉴别机制：公开密钥机制和数字证书</li><li>加密机制：混合密码体制</li><li>完整性机制：定义了共享的、可以用来形成报文鉴别码MAC的密钥</li><li>抗重放攻击：序列号，用随机数标记握手</li></ul><h3 id="SSL脆弱性分析">SSL脆弱性分析</h3><ul><li>客户端假冒</li><li>无法提供基于UDP的应用的安全保护</li><li>不能对抗通信流量分析：SSL只对数据进行保护，数据包的IP头和TCP头暴露在外</li><li>SSL进程存储空间中的主密钥泄露</li></ul><h2 id="SET">SET</h2><h3 id="双重数字签名">双重数字签名</h3><ul><li>订单信息OI：客户给商家</li><li>支付信息PI：客户给银行</li></ul><img src=".//image-20201101125501014.png" class="lazyload" data-srcset=".//image-20201101125501014.png" srcset="data:image/png;base64,666" alt="image-20201101125501014" style="zoom:80%;" /><h3 id="SET电子支付流程">SET电子支付流程</h3><ol><li><p>支付初始化：持卡人选择商品，下订单，选择银行卡</p><ul><li>初始请求：持卡人发送请求指定交易环境</li><li>初始应答：商家回复交易环境信息，以及证书等，并附上签名</li></ul><img src=".//image-20201101125955162.png" class="lazyload" data-srcset=".//image-20201101125955162.png" srcset="data:image/png;base64,666" alt="image-20201101125955162" style="zoom:80%;" /></li><li><p>购物请求：</p><ul><li>持卡人检查商家初始应答发送的签名信息，确保数据完整性</li><li>持卡人发送PReq</li></ul><img src=".//image-20201101130235811.png" class="lazyload" data-srcset=".//image-20201101130235811.png" srcset="data:image/png;base64,666" alt="image-20201101130235811" style="zoom:80%;" /></li></ol><p><img src=".//image-20201101130805188.png" class="lazyload" data-srcset=".//image-20201101130805188.png" srcset="data:image/png;base64,666" alt="image-20201101130805188" style="zoom:150%;" /><img src=".//image-20201101131210287.png" class="lazyload" data-srcset=".//image-20201101131210287.png" srcset="data:image/png;base64,666" alt="image-20201101131210287"></p><ol start="3"><li><p>商家验证持卡人的身份和授权</p><ul><li>商家将相关信息发送给支付网关</li></ul><img src=".//image-20201101131339258.png" class="lazyload" data-srcset=".//image-20201101131339258.png" srcset="data:image/png;base64,666" alt="image-20201101131339258" style="zoom:150%;" /></li><li><p>支付网关认证</p><ul><li>网关将信息发送给银行</li></ul><p><img src=".//image-20201101132850316.png" class="lazyload" data-srcset=".//image-20201101132850316.png" srcset="data:image/png;base64,666" alt="image-20201101132850316"></p></li><li><p>收单银行处理</p><ul><li><p>确保PI和AuthReq的一致性</p></li><li><p>校验持卡人和商家对于订购行为的一致性</p></li><li><p>发送AuthRes给商家</p></li></ul><p><img src=".//image-20201101133223907.png" class="lazyload" data-srcset=".//image-20201101133223907.png" srcset="data:image/png;base64,666" alt="image-20201101133223907"></p></li><li><p>支付完成</p><ul><li>通过捕获令牌(Capture Token)完成支付</li></ul></li><li><p>下单回复</p><p><img src=".//image-20201101133759144.png" class="lazyload" data-srcset=".//image-20201101133759144.png" srcset="data:image/png;base64,666" alt="image-20201101133759144"></p></li></ol><h3 id="SET核心技术">SET核心技术</h3><ul><li>公开密钥加密</li><li>数字签名</li><li>数字信封：公钥算法加密对称密钥</li><li>电子安全证书</li></ul><h2 id="PGP">PGP</h2><ul><li>提供可用于电子邮件和文件存储应用的<strong>保密</strong>与<strong>鉴别</strong>服务</li></ul><h3 id="PGP数字签名与认证">PGP数字签名与认证</h3><p><img src=".//image-20201101134921229.png" class="lazyload" data-srcset=".//image-20201101134921229.png" srcset="data:image/png;base64,666" alt="image-20201101134921229"></p><h3 id="PGP保密性">PGP保密性</h3><p><img src=".//image-20201101135128996.png" class="lazyload" data-srcset=".//image-20201101135128996.png" srcset="data:image/png;base64,666" alt="image-20201101135128996"></p><ul><li>邮件的存储转发特性不适合用DH算法交换密钥</li><li>使用公钥算法对每个消息生成<strong>一次性</strong>会话密钥</li></ul><h3 id="PGP保密和认证结合">PGP保密和认证结合</h3><p><img src=".//image-20201101135448177.png" class="lazyload" data-srcset=".//image-20201101135448177.png" srcset="data:image/png;base64,666" alt="image-20201101135448177"></p><h3 id="PGP压缩">PGP压缩</h3><ul><li>使用ZIP算法</li><li>先签名后压缩<ul><li>只需要存储原始报文和签名</li><li>易于更换压缩算法</li></ul></li></ul><h3 id="PGP密钥环">PGP密钥环</h3><ul><li>每个结点都有存储密钥的结构<ul><li>私钥环：存储该结点拥有的公/私钥对</li><li>公钥环：存储该结点拥有的其他所有用户的公钥</li></ul></li></ul><h3 id="PGP信任网">PGP信任网</h3><ul><li>PGP中没有认证机构，而是由用户互相对对方的公钥进行数字签名</li><li>确认是否信任<ul><li>通过自己的数字签名</li><li>通过自己完全信任的人的数字签名</li><li>通过自己有限信任的多个人的数字签名</li></ul></li></ul><h2 id="Kerberos">Kerberos</h2><ul><li>采用传统加密算法(非公钥算法)</li></ul><h3 id="基本概念">基本概念</h3><ul><li>Principle：安全个体，有名字和口令</li><li>KDC：网络服务，提供ticket和临时会话密钥</li><li>Ticket：客户用来向服务器证明身份的票据<ul><li>其大多数信息被服务器的密钥加密</li></ul></li><li>Authenticator：包含最近产生的信息的记录，需要用到会话密钥</li><li>Credentials：一个Ticket加上秘密的会话密钥</li><li>AS：Authentication Server<ul><li>通过long-term key认证用户</li><li>授予用户ticket granting ticket和short-term key</li><li>认证服务</li></ul></li><li>TGS：Ticket Granting Server<ul><li>通过ticket granting ticket和short-term key认证用户</li><li>发放service granting ticket给用户以访问其他服务器</li><li>授权和访问控制服务</li></ul></li></ul><h3 id="Kerberos工作流程">Kerberos工作流程</h3><h4 id="1-认证服务交换：获得票据许可票据-ticket-granting-ticket">1. 认证服务交换：获得票据许可票据(ticket granting ticket)</h4><p><img src=".//image-20201101144837036.png" class="lazyload" data-srcset=".//image-20201101144837036.png" srcset="data:image/png;base64,666" alt="image-20201101144837036"></p><h4 id="2-票据许可服务交换：获得服务许可票据-service-granting-ticket">2. 票据许可服务交换：获得服务许可票据(service granting ticket)</h4><p><img src=".//image-20201101145139960.png" class="lazyload" data-srcset=".//image-20201101145139960.png" srcset="data:image/png;base64,666" alt="image-20201101145139960"></p><h4 id="3-客户-服务器认证交换：获得服务image-20201101145321623">3. 客户/服务器认证交换：获得服务<img src=".//image-20201101145321623.png" class="lazyload" data-srcset=".//image-20201101145321623.png" srcset="data:image/png;base64,666" alt="image-20201101145321623"></h4><h3 id="Kerberos跨域认证">Kerberos跨域认证</h3><ol><li>获得本地TGS访问权</li><li>请求一张远程TGS的票据许可票据</li><li>向远程TGS请求其域内的服务</li></ol><img src=".//image-20201101145413287.png" class="lazyload" data-srcset=".//image-20201101145413287.png" srcset="data:image/png;base64,666" alt="image-20201101145413287" style="zoom: 50%;" /><h3 id="Kerberos优缺点">Kerberos优缺点</h3><h4 id="优点">优点</h4><ul><li>密码不在网上传输，不易被窃听，难以猜测</li><li>单点登录机制，只用输入一次口令</li><li>票据被盗之后难以使用，因为需要配合认证头来使用</li></ul><h4 id="缺点">缺点</h4><ul><li>缺乏撤销机制</li><li>密钥管理复杂</li><li>跨域认证复杂</li><li>需要始终同步</li><li>需要始终在线的AS和TGS</li></ul><h2 id="BAN">BAN</h2><h3 id="所用符号">所用符号</h3><ul><li><p>A, B, S：泛指参与协议的主体</p></li><li><p>P, Q, R：主体变量</p></li><li><p>X, Y: 公式变量</p></li><li><p>K: 密钥变量</p></li><li><p>K<sub>ab</sub>, K<sub>bs</sub>, K<sub>as</sub>: 主体之间的共享密钥</p></li><li><p>K<sub>a</sub>, K<sub>b</sub>, K<sub>s</sub>: 主体的公钥</p></li><li><p>K<sub>a</sub><sup>-1</sup>, K<sub>b</sub><sup>-1</sup>, K<sub>s</sub><sup>-1</sup>: 主体的私钥</p></li><li><p>N<sub>a</sub>, N<sub>b</sub>, N<sub>s</sub>：主体各自生成的用于确认新鲜性的随机数Nonce</p></li><li><p>{X}<sub>k</sub>：用密钥k加密X的结果</p></li><li><p>&lt;X&gt;Y：X和Y的组合</p></li><li><p>P-&gt;Q:(X)：P发送消息X给Q</p></li><li><p>bel(P,Q)：主体P相信X</p></li><li><p>sees(P,X)：P接收到X</p></li><li><p>said(P,X)：P发送X</p></li><li><p>cont(P,X)：P拥有对X正确与否的判决权</p></li><li><p>fresh(X)：X是新鲜的</p></li><li><p>skey(P,K,Q)：K是P,Q的共享密钥</p></li><li><p>goodkey(P,K,Q)：K是P,Q共享的良好密钥</p></li><li><p>pubkey(P,K)：K是P的公钥</p></li><li><p>secret(P,X,Q)：X是P和Q的共享秘密</p></li></ul><h3 id="推理规则">推理规则</h3><h4 id="消息意义规则">消息意义规则</h4><p>从加密消息所使用密钥以及消息中包含的秘密来推断消息发送者的身份</p><ul><li>例如对于共享密钥：bel(P,goodkey(P,K,Q)) and sees(P,{X}<sub>k</sub>) =&gt; bel(P,said(Q,X))</li></ul><h4 id="随机数验证规则">随机数验证规则</h4><p>如果P相信X是新鲜的，并且P相信Q曾经发送过X，那么P相信Q相信X</p><ul><li>bel(P,fresh(X)) and bel(P,said(Q,X)) =&gt; bel(P,bel(Q,X))</li></ul><h4 id="仲裁规则">仲裁规则</h4><p>如果P相信Q对X是有仲裁权的，并且P相信Q相信X，那么P相信X</p><ul><li>bel(P,cont(Q,X)) and bel(P,bel(Q,X)) =&gt; bel(P,X)</li></ul><h4 id="信仰规则">信仰规则</h4><ul><li><p>bel(P,X) and bel(P,Y) =&gt; bel(P,(X,Y))</p></li><li><p>bel(P,(X,Y)) =&gt; bel(P,X) or bel(P,Y)</p></li><li><p>bel(P,bel(Q,(X,Y))) =&gt; bel(P,bel(Q,X)) or bel(P,bel(Q,Y))</p></li></ul><h4 id="接收规则">接收规则</h4><ul><li>如果P接收到一个消息，那么P也接收到这个消息的一部分<ul><li>sees(P,(X,Y)) =&gt; sees(P,X)</li><li>sees(P,&lt;X&gt;Y) =&gt; sees(P,X)</li></ul></li><li>如果P收到加密消息，那么以下三种情况P可以读出消息原文<ul><li>bel(P,goodkey(P,K,Q)) and sees(P,{X}<sub>K</sub>) =&gt; sees(P,X)</li><li>bel(P,pubkey(P,K)) and sees(P,{X}<sub>K</sub>) =&gt; sees(P,X)</li><li>bel(P,pubkey(Q,K)) and sees(P,{X}<sub>K</sub><sup>-1</sup>) =&gt; sees(P,X)</li></ul></li></ul><h4 id="新鲜规则">新鲜规则</h4><p>如果消息的一部分是新鲜的，则整个消息是新鲜的</p><ul><li>bel(P,fresh(X)) =&gt; bel(P,fresh(X,Y))</li></ul><h4 id="传递规则">传递规则</h4><p>如果P相信Q曾经发送过整个消息，那么P相信Q曾经发送过消息的部分</p><ul><li>bel(P,said(Q,(X,Y))) =&gt; bel(P,said(Q,X))</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2020/11/01/hello-world/"/>
      <url>2020/11/01/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start">Quick Start</h2><h3 id="Create-a-new-post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
